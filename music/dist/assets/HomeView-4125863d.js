import{_ as b,r as v,o as n,c as l,a as t,b as h,w as g,d as u,t as a,g as k,s as d,e as $,R as f,k as p,F as S,x,f as w,h as D,i as I,j as R,l as q,m as C}from"./index-d70d269e.js";const P={name:"SongItem",props:["song"]},E={class:"flex justify-between items-center p-3 pl-6 cursor-pointer transition duration-300 hover:bg-gray-50"},H={class:"text-gray-500 text-sm"},V={class:"text-gray-600 text-lg"},B=["onClick"],L=t("i",{class:"fa fa-comments text-gray-600"},null,-1);function F(o,e,s,i,m,y){const c=v("router-link");return n(),l("li",E,[t("div",null,[h(c,{to:{name:"song",params:{id:s.song.docID}},class:"font-bold block text-gray-600"},{default:g(()=>[u(a(s.song.modified_name),1)]),_:1},8,["to"]),t("span",H,a(s.song.display_name),1)]),t("div",V,[h(c,{custom:"",to:{name:"song",params:{id:s.song.docID},hash:"#comments"}},{default:g(({navigate:r})=>[t("span",{class:"comments",onClick:r},[L,u(" "+a(s.song.comment_count),1)],8,B)]),_:1},8,["to"])])])}const M=b(P,[["render",F]]),N={beforeMount(o,e){let s=`fa fa-${e.value.icon} text-green-400 text-xl`;e.value.right&&(s+=" float-right"),o.innerHTML+=`<i class="${s}"></i>`}},T="/assets/img/introduction-music.png",j={name:"HomeView",components:{AppSongItem:M},directives:{"icon-secondary":N},data(){return{songs:[],maxPerPage:25,pendingRequest:!1}},async created(){this.getSongs(),window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){const{scrollTop:o,offsetHeight:e}=document.documentElement,{innerHeight:s}=window;Math.round(o)+s===e&&this.getSongs()},async getSongs(){if(this.pendingRequest)return;this.pendingRequest=!0;let o;if(this.songs.length){const e=await k(d,this.songs[this.songs.length-1].docID),s=await $(e),i=f(d,x("modified_name"),S(s),p(this.maxPerPage));o=await w(i)}else{const e=f(d,x("modified_name"),p(this.maxPerPage));o=await w(e)}o.forEach(e=>{this.songs.push({docID:e.id,...e.data()})}),this.pendingRequest=!1}}},O={class:"mb-8 py-20 text-white text-center relative"},W=t("div",{class:"absolute inset-0 w-full h-full bg-contain introduction-bg",style:{"background-image":"url(assets/img/header.png)"}},null,-1),A={class:"container mx-auto"},U={class:"text-white main-header-content"},z={class:"font-bold text-5xl mb-5"},G={class:"w-full md:w-8/12 mx-auto"},J=t("img",{class:"relative block mx-auto mt-5 -mb-20 w-auto max-w-full",src:T},null,-1),K={class:"container mx-auto"},Q={class:"bg-white rounded border border-gray-200 relative flex flex-col"},X={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},Y=t("span",{class:"card-title"},"Songs",-1),Z=[Y],tt={id:"playlist"};function et(o,e,s,i,m,y){const c=v("app-song-item"),r=D("icon-secondary");return n(),l("main",null,[t("section",O,[W,t("div",A,[t("div",U,[t("h1",z,a(o.$t("home.listen")),1),t("p",G,a(o.$t("home.explore")),1)])]),J]),t("section",K,[t("div",Q,[I((n(),l("div",X,Z)),[[r,{icon:"headphones-alt",right:!0}]]),t("ol",tt,[(n(!0),l(R,null,q(m.songs,_=>(n(),C(c,{key:_.dcoID,song:_},null,8,["song"]))),128))])])])])}const ot=b(j,[["render",et]]);export{ot as default};
