import{_ as b,r as v,o as n,c as l,a as t,b as h,w as _,d as u,t as a,n as k,g as $,s as d,e as S,R as f,k as p,F as D,x,f as w,h as I,i as C,j as R,l as q,m as P}from"./index-6b728ebc.js";const E={name:"SongItem",props:["song"]},H={class:"text-gray-500 text-sm"},V={class:"text-gray-600 text-lg"},B=["onClick"],L=t("i",{class:"fa fa-comments text-gray-600"},null,-1);function F(o,s,e,i,m,y){const c=v("router-link");return n(),l("li",{class:k(["flex justify-between items-center p-3 pl-6 cursor-pointer transition duration-300 hover:bg-gray-50 example snapshot",`song-id-${e.song.docID}`])},[t("div",null,[h(c,{to:{name:"song",params:{id:e.song.docID}},class:"font-bold block text-gray-600 composition-name"},{default:_(()=>[u(a(e.song.modified_name),1)]),_:1},8,["to"]),t("span",H,a(e.song.display_name),1)]),t("div",V,[h(c,{custom:"",to:{name:"song",params:{id:e.song.docID},hash:"#comments"}},{default:_(({navigate:r})=>[t("span",{class:"comments",onClick:r},[L,u(" "+a(e.song.comment_count),1)],8,B)]),_:1},8,["to"])])],2)}const M=b(E,[["render",F]]),N={beforeMount(o,s){let e=`fa fa-${s.value.icon} text-green-400 text-xl`;s.value.right&&(e+=" float-right"),o.innerHTML+=`<i class="${e}"></i>`}},T="/assets/img/introduction-music.png",j={name:"HomeView",components:{AppSongItem:M},directives:{"icon-secondary":N},data(){return{songs:[],maxPerPage:25,pendingRequest:!1}},async created(){this.getSongs(),window.addEventListener("scroll",this.handleScroll)},beforeUnmount(){window.removeEventListener("scroll",this.handleScroll)},methods:{handleScroll(){const{scrollTop:o,offsetHeight:s}=document.documentElement,{innerHeight:e}=window;Math.round(o)+e===s&&this.getSongs()},async getSongs(){if(this.pendingRequest)return;this.pendingRequest=!0;let o;if(this.songs.length){const s=await $(d,this.songs[this.songs.length-1].docID),e=await S(s),i=f(d,x("modified_name"),D(e),p(this.maxPerPage));o=await w(i)}else{const s=f(d,x("modified_name"),p(this.maxPerPage));o=await w(s)}o.forEach(s=>{this.songs.push({docID:s.id,...s.data()})}),this.pendingRequest=!1}}},O={class:"mb-8 py-20 text-white text-center relative"},W=t("div",{class:"absolute inset-0 w-full h-full bg-contain introduction-bg",style:{"background-image":"url(assets/img/header.png)"}},null,-1),z={class:"container mx-auto"},A={class:"text-white main-header-content"},U={class:"font-bold text-5xl mb-5"},G={class:"w-full md:w-8/12 mx-auto"},J=t("img",{class:"relative block mx-auto mt-5 -mb-20 w-auto max-w-full",src:T},null,-1),K={class:"container mx-auto"},Q={class:"bg-white rounded border border-gray-200 relative flex flex-col"},X={class:"px-6 pt-6 pb-5 font-bold border-b border-gray-200"},Y=t("span",{class:"card-title"},"Songs",-1),Z=[Y],tt={id:"playlist"};function et(o,s,e,i,m,y){const c=v("app-song-item"),r=I("icon-secondary");return n(),l("main",null,[t("section",O,[W,t("div",z,[t("div",A,[t("h1",U,a(o.$t("home.listen")),1),t("p",G,a(o.$t("home.explore")),1)])]),J]),t("section",K,[t("div",Q,[C((n(),l("div",X,Z)),[[r,{icon:"headphones-alt",right:!0}]]),t("ol",tt,[(n(!0),l(R,null,q(m.songs,g=>(n(),P(c,{key:g.dcoID,song:g},null,8,["song"]))),128))])])])])}const ot=b(j,[["render",et]]);export{ot as default};
